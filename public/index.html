<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Management - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Auth Screen -->
    <div id="authScreen" class="screen active">
        <div class="auth-container">
            <h1>üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏</h1>
            
            <!-- Login Form -->
            <div id="loginForm" class="auth-form active">
                <h2>–í—Ö–æ–¥</h2>
                <input type="email" id="loginEmail" placeholder="Email" required>
                <input type="password" id="loginPassword" placeholder="–ü–∞—Ä–æ–ª—å" required>
                <button onclick="handleLogin()">–í–æ–π—Ç–∏</button>
                <p>–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="#" onclick="switchToRegister()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a></p>
                <div id="loginError" class="error-message"></div>
            </div>

            <!-- Register Form -->
            <div id="registerForm" class="auth-form">
                <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
                <input type="text" id="registerName" placeholder="–ò–º—è" required>
                <input type="email" id="registerEmail" placeholder="Email" required>
                <input type="password" id="registerPassword" placeholder="–ü–∞—Ä–æ–ª—å (–º–∏–Ω. 6 —Å–∏–º–≤–æ–ª–æ–≤)" required>
                <button onclick="handleRegister()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                <p>–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="#" onclick="switchToLogin()">–í–æ–π—Ç–∏</a></p>
                <div id="registerError" class="error-message"></div>
            </div>
        </div>
    </div>

    <!-- App Screen -->
    <div id="appScreen" class="screen">
        <nav class="navbar">
            <div class="navbar-brand">üìã –ú–æ–∏ –∑–∞–¥–∞—á–∏</div>
            <div class="navbar-user">
                <span id="userEmail"></span>
                <button onclick="handleLogout()" class="btn-logout">–í—ã—Ö–æ–¥</button>
            </div>
        </nav>

        <div class="container">
            <!-- Create Task Section -->
            <section class="create-task-section">
                <h2>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É</h2>
                <form onsubmit="handleCreateTask(event)">
                    <div class="form-group">
                        <input type="text" id="taskTitle" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–¥–∞—á–∏" required maxlength="200">
                        <small>Max 200 —Å–∏–º–≤–æ–ª–æ–≤</small>
                    </div>
                    <div class="form-group">
                        <textarea id="taskDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏" required maxlength="5000"></textarea>
                        <small>Max 5000 —Å–∏–º–≤–æ–ª–æ–≤</small>
                    </div>
                    <button type="submit" class="btn-primary">+ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</button>
                </form>
                <div id="createError" class="error-message"></div>
            </section>

            <!-- Filter Section -->
            <section class="filter-section">
                <label>–§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É:</label>
                <button onclick="filterTasks('all')" class="filter-btn active" data-filter="all">–í—Å–µ</button>
                <button onclick="filterTasks('pending')" class="filter-btn" data-filter="pending">‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ</button>
                <button onclick="filterTasks('in-progress')" class="filter-btn" data-filter="in-progress">‚öôÔ∏è –í –ø—Ä–æ—Ü–µ—Å—Å–µ</button>
                <button onclick="filterTasks('completed')" class="filter-btn" data-filter="completed">‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ</button>
            </section>

            <!-- Tasks List -->
            <section class="tasks-section">
                <h2>–ú–æ–∏ –∑–∞–¥–∞—á–∏</h2>
                <div id="tasksContainer" class="tasks-container">
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á...</div>
                </div>
            </section>
        </div>
    </div>

    <!-- Edit Task Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditModal()">&times;</span>
            <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á—É</h2>
            <form onsubmit="handleUpdateTask(event)">
                <div class="form-group">
                    <label>–°—Ç–∞—Ç—É—Å:</label>
                    <select id="editStatus">
                        <option value="pending">‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ</option>
                        <option value="in-progress">‚öôÔ∏è –í –ø—Ä–æ—Ü–µ—Å—Å–µ</option>
                        <option value="completed">‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ</option>
                    </select>
                </div>
                <button type="submit" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button type="button" onclick="closeEditModal()" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
            </form>
        </div>
    </div>

    <!-- Loading & Error Messages -->
    <div id="notification" class="notification"></div>

    <script src="js/api.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
